<!DOCTYPE html>
<html>
	<head>
	
		 <link rel="stylesheet" href="index.css">


		 <meta charset="utf-8">
		 
	<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>   	 
	<script src="https://unpkg.com/d3-simple-slider"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.4/angular.min.js"></script>
  <script src="https://rawgithub.com/angular-ui/ui-sortable/master/src/sortable.js"></script>
  <script src="https://rawgit.com/thgreasi/ui-sortable-multiselection/master/src/ui.sortable.multiselection.js"></script>
<script>
var encabezados1 =["ddd","eee"];
var filedsToD3 =[];
var encabezados =[];
var datosnew={};
 </script>
<title>Congreso Visible</title>
 
	</head>
	    
		
		<h1> Congreso Visible </h1>



	<body>
     
	  <div id="content" >
			
					  
	
<p>
<p>
<br>


	  
	    <h2> ¿Cuál es el estado que alcanzan los proyectos que se radican por comisiones?</h2>
	
	
	 <span></span>
	 <output id="fechamarca" class="item1"></output>
	 
	 
	
	 
	<div id="selecion"></div>
	    <svg id="svg" width="2000" height="850" class="grafica"></svg>
		 
	  <script src="senado.js"></script>
	   
	
	<script>
	var globalarray=[];
		  
		  function  recive(arreglo){
		  
		  globalarray = arreglo;
		  
		  }
		  </script>
	
	<div ng-app="sortableApp" ng-controller="sortableController" class = "container" >
	
  <div class="floatleft">
  
  
    <div ui-sortable="sortableOptions" ng-model="list" class="list logList">
	
	
      <div ui-sortable-selectable ng-repeat="item in list" class="item">
      {{item.text}}
      </div>
	  <p>
	  <div class="floatcenter">
	 <input type="button" value="Mostrar" ng-click="procesarClic()" class="button">
	 
	 </div>
	  <p></p>
	
    </div>
	
	  

	  </div>
	  
	  <div  class="floatright logList1">

  <label>Encontrar: <input type="text" id="filterInput"  style="width:500px;height:20px" class="item1"></label>
  
  <input type="submit" value="Buscar" onClick="buscaProyecto()"  class="button">
  <p>

  </p>
  Id Iniciativa:
  <p></p>
  <div>
  <output id="enceuntra" class="item1"></output>
  </div>
  <p></p>
  Ruta:
    <div id="slider">
	
	</div>
</div>


  <div class="clear"></div>

 
<script>


var salidadadtos =[];
  
var myapp = angular.module('sortableApp', ['ui.sortable', 'ui.sortable.multiselection']);
  

myapp.controller('sortableController', function ($scope, uiSortableMultiSelectionMethods) {
var tmpList1 = ["comision_entrante", "iniciativa", "estado_actual", "id_proyecto", "titulo", "fecha_radicacion"];
  var tmpList = [];
  
  if(globalarray.length>0){
 tmpList=[];
 }else { 
   globalarray =tmpList1;
   }
 
 
  for(i=0;i<globalarray.length;i++){
    var elemento = globalarray[i];
      tmpList.push({text: elemento, value:i});
  }
 
  $scope.list = tmpList;  
  $scope.sortingLog = [];
  
  $scope.sortableOptions = uiSortableMultiSelectionMethods.extendOptions({
    stop: function(e, ui) {
      // this callback has the changed model
      var logEntry = tmpList.map(function(i){
        return i.value;
      }).join(', ');
      
      $scope.sortingLog.push('Stop: ' + logEntry);
  	  arreglado = $scope.sortingLog;
    }
  });
  
  // bonus: listen for sortable item selections
  angular.element('[ui-sortable]').on('ui-sortable-selectionschanged', function (e, args) {
    
    var $this = $(this);
    var selectedItemIndexes = $this.find('.ui-sortable-selected')
    .map(function(i, element){
      return $(this).index();
    })
    .toArray();
      
    var selectedItems = $.map(selectedItemIndexes, function(i) {
      return $scope.list[i]
    });
	  
    list = $scope.list;
  });
  
  $scope.procesarClic = function(){
  dAngular($scope.list);
  }
});
  </script>
  
 
  
</div>
	
</div>	  

  
	</body>
 
</html>

